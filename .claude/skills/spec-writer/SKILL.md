---
name: spec-writer
description: åŸºäºéœ€æ±‚æ–‡æ¡£ç”Ÿæˆäº§å“éœ€æ±‚è¯´æ˜ä¹¦(Spec)ï¼Œä¾›AIç”ŸæˆDemoä»£ç å’Œäº¤ä»˜å›¢é˜Ÿå¼€å‘ä½¿ç”¨
metadata:
  short-description: ç”Ÿæˆäº§å“éœ€æ±‚è¯´æ˜ä¹¦
  triggers:
    - "ç”Ÿæˆspec"
    - "å†™éœ€æ±‚è¯´æ˜ä¹¦"
    - "ç”Ÿæˆéœ€æ±‚è¯´æ˜ä¹¦"
    - "å‡ºspec"
    - "äº§å“éœ€æ±‚è¯´æ˜ä¹¦"
    - "PRD"
  examples:
    - "åŸºäºéœ€æ±‚ç”Ÿæˆspec"
    - "å¸®æˆ‘å†™äº§å“éœ€æ±‚è¯´æ˜ä¹¦"
    - "ç”ŸæˆPRDæ–‡æ¡£"
  dependencies:
    - requirements  # å¿…é¡»å…ˆæœ‰éœ€æ±‚æ–‡æ¡£
    - humanizer-zh  # è¾“å‡ºäººæ€§åŒ–å¤„ç†ï¼ˆå¿…é¡»ï¼‰
---

# SyncMind äº§å“éœ€æ±‚è¯´æ˜ä¹¦(Spec) Skill

è¿™ä¸ª skill ç”¨äºåŸºäº `requirements.json` ç”Ÿæˆç»“æ„åŒ–çš„äº§å“éœ€æ±‚è¯´æ˜ä¹¦ï¼Œä¾› AI ç”Ÿæˆ Demo ä»£ç å’Œäº¤ä»˜å›¢é˜Ÿç»§ç»­å¼€å‘ä½¿ç”¨ã€‚

## æ ¸å¿ƒå®šä½

**Spec = äº§å“éœ€æ±‚è¯´æ˜ä¹¦ï¼Œèšç„¦"åšä»€ä¹ˆ"ï¼Œä¸å…³å¿ƒ"æ€ä¹ˆåš"**

| Spec åŒ…å« | Spec ä¸åŒ…å« |
|-----------|-------------|
| äº§å“èƒŒæ™¯ã€ç›®æ ‡ã€ç”¨æˆ· | æŠ€æœ¯æ¶æ„è®¾è®¡ |
| åŠŸèƒ½æ¸…å•ã€æ¨¡å—åˆ’åˆ† | æ¥å£/API è®¾è®¡ |
| é¡µé¢ç»“æ„ã€äº¤äº’æµç¨‹ | æ•°æ®åº“è®¾è®¡ |
| å­—æ®µå®šä¹‰ã€ä¸šåŠ¡è§„åˆ™ | åŸ‹ç‚¹æ–¹æ¡ˆ |
| åŸå‹/çº¿æ¡†æè¿° | æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ |

---

## ğŸ”¥ è´¨é‡ä¼˜å…ˆåŸåˆ™ï¼ˆæ ¸å¿ƒï¼‰

### é«˜è´¨é‡ Spec çš„å®šä¹‰

**é«˜è´¨é‡ â‰  å†…å®¹å¤šã€‚å†…å®¹å¤šä¸è§£å†³çœŸæ­£é—®é¢˜ = åƒåœ¾ã€‚**

| ç»´åº¦ | é«˜è´¨é‡è¡¨ç° | ä½è´¨é‡è¡¨ç°ï¼ˆé¿å…ï¼‰ |
|------|------------|-------------------|
| **è´´åˆéœ€æ±‚** | æ¯ä¸ªåŠŸèƒ½éƒ½èƒ½è¿½æº¯åˆ°ç”¨æˆ·ç—›ç‚¹ | å‡­ç©ºæ·»åŠ "å¯èƒ½æœ‰ç”¨"çš„åŠŸèƒ½ |
| **æ·±åº¦æ€è€ƒ** | è§£é‡Š"ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡" | åªåˆ—"åšä»€ä¹ˆ"ï¼Œä¸è¯´ä¸ºä»€ä¹ˆ |
| **ç²¾ç‚¼ä¸å†—ä½™** | 20 ä¸ªå­—æ®µè§£å†³é—®é¢˜ | 100 ä¸ªå­—æ®µæ˜¾å¾—ä¸“ä¸š |
| **æœ‰å–èˆ** | æ˜ç¡®è¯´"ä¸åšä»€ä¹ˆ"å’ŒåŸå›  | ä»€ä¹ˆéƒ½æƒ³åšï¼Œä»€ä¹ˆéƒ½åšä¸å¥½ |

### è´¨é‡æ£€æŸ¥æ¸…å•

ç”Ÿæˆ Spec å‰ï¼Œå¿…é¡»å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š

**1. è´´åˆåº¦æ£€æŸ¥**
- [ ] æ¯ä¸ªæ¨¡å—èƒ½å¦è¿½æº¯åˆ° requirements ä¸­çš„å…·ä½“éœ€æ±‚ï¼Ÿ
- [ ] æœ‰æ²¡æœ‰"çœ‹èµ·æ¥åˆç†ä½†å®¢æˆ·æ²¡æè¿‡"çš„åŠŸèƒ½ï¼Ÿï¼ˆåˆ é™¤å®ƒï¼‰
- [ ] æ ¸å¿ƒç—›ç‚¹æ˜¯å¦è¢«ä¼˜å…ˆè§£å†³ï¼Ÿ

**2. æ·±åº¦æ£€æŸ¥**
- [ ] æ˜¯å¦è§£é‡Šäº†"ä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†æ¨¡å—"ï¼Ÿ
- [ ] æ˜¯å¦è§£é‡Šäº†"ä¸ºä»€ä¹ˆè¿™ä¸ªå­—æ®µæ˜¯å¿…å¡«"ï¼Ÿ
- [ ] å…³é”®è®¾è®¡å†³ç­–æ˜¯å¦æœ‰ä¾æ®ï¼Ÿ

**3. ç²¾ç‚¼åº¦æ£€æŸ¥**
- [ ] èƒ½å¦ç”¨æ›´å°‘çš„é¡µé¢å®ç°ç›¸åŒç›®æ ‡ï¼Ÿ
- [ ] èƒ½å¦ç”¨æ›´å°‘çš„å­—æ®µæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Ÿ
- [ ] æœ‰æ²¡æœ‰"ä¸ºäº†å…¨é¢è€Œå…¨é¢"çš„å†…å®¹ï¼Ÿï¼ˆåˆ é™¤å®ƒï¼‰

**4. å–èˆæ£€æŸ¥**
- [ ] æ˜¯å¦æ˜ç¡®äº†"ä¸åšä»€ä¹ˆ"ï¼Ÿ
- [ ] æ˜¯å¦è§£é‡Šäº†å–èˆçš„åŸå› ï¼Ÿ
- [ ] æ˜¯å¦ä¼˜å…ˆæ»¡è¶³ P0 éœ€æ±‚ï¼Œè€Œä¸æ˜¯å¹³å‡ç”¨åŠ›ï¼Ÿ

### åæ¨¡å¼ï¼šå†…å®¹å¤š = æ€è€ƒæ‡’æƒ°

âŒ **é”™è¯¯ç¤ºèŒƒ**ï¼š

```
ç”¨æˆ·ç®¡ç†æ¨¡å—åŒ…å«ï¼šç”¨æˆ·åˆ—è¡¨ã€ç”¨æˆ·è¯¦æƒ…ã€ç”¨æˆ·æ–°å¢ã€ç”¨æˆ·ç¼–è¾‘ã€ç”¨æˆ·åˆ é™¤ã€
ç”¨æˆ·å¯¼å…¥ã€ç”¨æˆ·å¯¼å‡ºã€ç”¨æˆ·å®¡æ ¸ã€ç”¨æˆ·å†»ç»“ã€ç”¨æˆ·è§£å†»ã€ç”¨æˆ·å¯†ç é‡ç½®ã€
ç”¨æˆ·æƒé™é…ç½®ã€ç”¨æˆ·è§’è‰²åˆ†é…ã€ç”¨æˆ·éƒ¨é—¨è°ƒæ•´ã€ç”¨æˆ·æ“ä½œæ—¥å¿—...
```

è¿™ä¸æ˜¯"å…¨é¢"ï¼Œè¿™æ˜¯**æ²¡æœ‰æ€è€ƒ**ã€‚å®¢æˆ·çœŸçš„éœ€è¦è¿™ 15 ä¸ªåŠŸèƒ½å—ï¼Ÿ

âœ… **æ­£ç¡®ç¤ºèŒƒ**ï¼š

```
ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼š
- ç”¨æˆ·åˆ—è¡¨ï¼ˆæ ¸å¿ƒï¼‰ï¼šæ”¯æŒæŒ‰éƒ¨é—¨ç­›é€‰ï¼Œæ»¡è¶³"å¿«é€Ÿæ‰¾åˆ°æŸéƒ¨é—¨äººå‘˜"çš„éœ€æ±‚
- ç”¨æˆ·æ–°å¢/ç¼–è¾‘ï¼šä»…ä¿ç•™å¿…è¦å­—æ®µï¼ˆå§“åã€æ‰‹æœºã€éƒ¨é—¨ã€è§’è‰²ï¼‰
- ç”¨æˆ·å†»ç»“ï¼šå®¢æˆ·æ˜ç¡®æå‡º"ç¦»èŒå‘˜å·¥ä¸åˆ é™¤ï¼Œåªå†»ç»“"

ä¸åšï¼š
- ç”¨æˆ·å¯¼å…¥/å¯¼å‡ºï¼šå®¢æˆ·æ˜ç¡®è¡¨ç¤º"äººå‘˜ä¸è¶…è¿‡ 50 äººï¼Œæ‰‹åŠ¨ç»´æŠ¤å³å¯"
- æ“ä½œæ—¥å¿—ï¼šå®¢æˆ·è¯´"åˆæœŸä¸éœ€è¦ï¼Œåç»­å†è€ƒè™‘"
```

### è¾“å‡ºè¯„åˆ†æ ‡å‡†

ç”Ÿæˆ Spec åï¼ŒæŒ‰ä»¥ä¸‹æ ‡å‡†è‡ªè¯„ï¼ˆæ€»åˆ† 50ï¼‰ï¼š

| ç»´åº¦ | è¯„ä¼°æ ‡å‡† | å¾—åˆ† |
|------|----------|------|
| **éœ€æ±‚è´´åˆåº¦** | æ¯ä¸ªåŠŸèƒ½éƒ½èƒ½è¿½æº¯åˆ°ç”¨æˆ·åŸè¯ï¼Ÿ | /10 |
| **è®¾è®¡æ·±åº¦** | æœ‰"ä¸ºä»€ä¹ˆ"è€Œéåªæœ‰"æ˜¯ä»€ä¹ˆ"ï¼Ÿ | /10 |
| **ç²¾ç‚¼ç¨‹åº¦** | åˆ é™¤å†—ä½™åè¿˜èƒ½å†åˆ å—ï¼Ÿ | /10 |
| **å–èˆæ¸…æ™°** | æ˜ç¡®è¯´äº†"ä¸åšä»€ä¹ˆ"ï¼Ÿ | /10 |
| **å¯æ‰§è¡Œæ€§** | å¼€å‘çœ‹äº†èƒ½ç›´æ¥åŠ¨æ‰‹ï¼Ÿ | /10 |
| **æ€»åˆ†** |  | **/50** |

**æ ‡å‡†**ï¼š
- 45-50 åˆ†ï¼šä¼˜ç§€ï¼Œå¯äº¤ä»˜
- 35-44 åˆ†ï¼šè‰¯å¥½ï¼Œéœ€å°æ”¹
- < 35 åˆ†ï¼šé‡åšï¼Œå†…å®¹å¤ªæ°´

## è¾“å‡ºç‰©ç”¨é€”

| æ¶ˆè´¹è€… | ç”¨é€” |
|--------|------|
| **AI (init-app)** | åŸºäº Spec ç”Ÿæˆçº¯å‰ç«¯ Demoï¼ˆMock æ•°æ®ï¼Œæ— åç«¯ï¼‰ |
| **äº¤ä»˜å›¢é˜Ÿ** | ç†è§£äº§å“éœ€æ±‚ï¼Œåœ¨ Demo åŸºç¡€ä¸Šç»§ç»­å¼€å‘ |

## å·¥ä½œæµç¨‹ä½ç½®

```
/requirementsï¼ˆå®¢æˆ·éœ€æ±‚ï¼‰
      â†“
/spec-writerï¼ˆæœ¬ skillï¼šç”Ÿæˆ Specï¼‰
      â†“
   docs/spec/spec.json + spec.md
      â†“
/init-appï¼ˆåŸºäº Spec ç”Ÿæˆ Demoï¼‰
      â†“
   å¯è¿è¡Œå‰ç«¯ä»£ç ï¼ˆMock æ•°æ®ï¼‰
      â†“
   äº¤ä»˜å›¢é˜Ÿç»§ç»­å¼€å‘
```

## å‰ç½®æ¡ä»¶

- **å¿…é¡»**ï¼š`docs/customer/requirements.json` å­˜åœ¨ä¸” status ä¸ä¸º "è‰ç¨¿"
- **æ¨è**ï¼šrequirements ä¸­çš„ pendingQuestions å·²åŸºæœ¬å›ç­”å®Œæˆï¼ˆå®Œæˆåº¦ > 50%ï¼‰

## è¾“å‡ºæ–‡ä»¶

```
docs/spec/
â”œâ”€â”€ spec.json           # ç»“æ„åŒ–æ•°æ®ï¼ˆAI æ¶ˆè´¹ï¼‰
â”œâ”€â”€ spec.md             # å¯è¯»æ–‡æ¡£ï¼ˆäººå·¥é˜…è¯»/å®¡æ ¸ï¼‰
â””â”€â”€ .spec-mapping.yaml  # æ¨¡å—â†’ä»£ç æ˜ å°„ï¼ˆå¢é‡æ›´æ–°ç”¨ï¼‰
```

---

## Spec æ ‡å‡†æ ¼å¼

### spec.json å®Œæ•´ç»“æ„

```typescript
interface SpecDocument {
  // ===== å…ƒä¿¡æ¯ =====
  meta: {
    version: string;           // spec ç‰ˆæœ¬å·ï¼Œå¦‚ "1.0.0"
    name: string;              // äº§å“åç§°
    description: string;       // ä¸€å¥è¯æè¿°
    createdAt: string;         // åˆ›å»ºæ—¶é—´
    updatedAt: string;         // æ›´æ–°æ—¶é—´
    status: "draft" | "review" | "approved";
    sourceRequirements: string; // æ¥æºéœ€æ±‚æ–‡æ¡£ç‰ˆæœ¬
  };

  // ===== ç¬¬ä¸€éƒ¨åˆ†ï¼šäº§å“æ¦‚è¿° =====
  overview: {
    background: string;        // é¡¹ç›®èƒŒæ™¯ï¼ˆç®€æ´ç‰ˆï¼‰
    goals: string[];           // äº§å“ç›®æ ‡ï¼ˆ3-5æ¡ï¼‰
    targetUsers: {
      role: string;            // è§’è‰²åç§°
      description: string;     // è§’è‰²æè¿°
      needs: string[];         // æ ¸å¿ƒè¯‰æ±‚
    }[];
    scope: {
      included: string[];      // èŒƒå›´å†…
      excluded: string[];      // èŒƒå›´å¤–ï¼ˆæ˜ç¡®ä¸åšçš„ï¼‰
    };
  };

  // ===== ç¬¬äºŒéƒ¨åˆ†ï¼šä¿¡æ¯æ¶æ„ =====
  architecture: {
    sitemap: SitemapNode[];    // ç«™ç‚¹åœ°å›¾/å¯¼èˆªç»“æ„
  };

  // ===== ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¨¡å—å®šä¹‰ =====
  modules: ModuleSpec[];

  // ===== ç¬¬å››éƒ¨åˆ†ï¼šå…¨å±€è§„åˆ™ =====
  globalRules: {
    roles: RoleSpec[];         // è§’è‰²æƒé™å®šä¹‰
    dictionary: DictItem[];    // æ•°æ®å­—å…¸ï¼ˆä¸‹æ‹‰é€‰é¡¹ç­‰ï¼‰
    statusFlows: StatusFlow[]; // çŠ¶æ€æµè½¬å®šä¹‰
  };
}

// ==================== ç«™ç‚¹åœ°å›¾ ====================

interface SitemapNode {
  id: string;                  // å”¯ä¸€æ ‡è¯†
  name: string;                // æ˜¾ç¤ºåç§°
  route: string;               // è·¯ç”±è·¯å¾„
  icon?: string;               // å›¾æ ‡åç§°ï¼ˆå¦‚ "users", "file-text"ï¼‰
  children?: SitemapNode[];    // å­èŠ‚ç‚¹
}

// ==================== æ¨¡å—å®šä¹‰ ====================

interface ModuleSpec {
  id: string;                  // æ¨¡å—IDï¼Œå¦‚ "user-management"
  name: string;                // æ¨¡å—åç§°ï¼Œå¦‚ "ç”¨æˆ·ç®¡ç†"
  description: string;         // æ¨¡å—æè¿°
  locked: boolean;             // æ˜¯å¦é”å®šï¼ˆäººå·¥å®šåˆ¶åé”å®šï¼ŒAI è·³è¿‡ï¼‰
  lockedReason?: string;       // é”å®šåŸå› 
  pages: PageSpec[];           // æ¨¡å—ä¸‹çš„é¡µé¢
}

// ==================== é¡µé¢å®šä¹‰ ====================

interface PageSpec {
  id: string;                  // é¡µé¢ID
  name: string;                // é¡µé¢åç§°
  route: string;               // è·¯ç”±è·¯å¾„
  description: string;         // é¡µé¢æè¿°
  locked: boolean;             // æ˜¯å¦é”å®š
  lockedReason?: string;
  layout: PageLayout;          // é¡µé¢å¸ƒå±€ç±»å‹
  sections: SectionSpec[];     // é¡µé¢åŒºå—
}

type PageLayout = 
  | "list"                     // åˆ—è¡¨é¡µï¼šè¡¨æ ¼ + ç­›é€‰ + æ“ä½œ
  | "detail"                   // è¯¦æƒ…é¡µï¼šä¿¡æ¯å±•ç¤º
  | "form"                     // è¡¨å•é¡µï¼šæ•°æ®å½•å…¥
  | "dashboard"                // ä»ªè¡¨ç›˜ï¼šå¤šå¡ç‰‡/å›¾è¡¨
  | "steps"                    // æ­¥éª¤é¡µï¼šåˆ†æ­¥æ“ä½œ
  | "custom";                  // è‡ªå®šä¹‰å¸ƒå±€

// ==================== åŒºå—å®šä¹‰ ====================

interface SectionSpec {
  id: string;
  name: string;                // åŒºå—åç§°ï¼ˆå¦‚"åŸºç¡€ä¿¡æ¯"ã€"æ“ä½œè®°å½•"ï¼‰
  type: SectionType;           // åŒºå—ç±»å‹
  description: string;         // åŒºå—æè¿°
  fields?: FieldSpec[];        // å­—æ®µåˆ—è¡¨ï¼ˆè¡¨å•/è¡¨æ ¼ç±»ï¼‰
  columns?: ColumnSpec[];      // è¡¨æ ¼åˆ—å®šä¹‰ï¼ˆtable ç±»å‹ä¸“ç”¨ï¼‰
  actions?: ActionSpec[];      // æ“ä½œæŒ‰é’®
  rules?: RuleSpec[];          // ä¸šåŠ¡è§„åˆ™
  config?: SectionConfig;      // åŒºå—é…ç½®
}

type SectionType = 
  | "table"                    // æ•°æ®è¡¨æ ¼
  | "form"                     // è¡¨å•
  | "card"                     // ä¿¡æ¯å¡ç‰‡
  | "cards"                    // å¡ç‰‡åˆ—è¡¨
  | "chart"                    // å›¾è¡¨
  | "tabs"                     // æ ‡ç­¾é¡µ
  | "steps"                    // æ­¥éª¤æ¡
  | "timeline"                 // æ—¶é—´çº¿
  | "description"              // æè¿°åˆ—è¡¨
  | "statistic"                // ç»Ÿè®¡æ•°å€¼
  | "custom";                  // è‡ªå®šä¹‰

interface SectionConfig {
  // è¡¨æ ¼é…ç½®
  pagination?: boolean;        // æ˜¯å¦åˆ†é¡µ
  pageSize?: number;           // æ¯é¡µæ¡æ•°
  selectable?: boolean;        // æ˜¯å¦å¯é€‰æ‹©
  sortable?: boolean;          // æ˜¯å¦å¯æ’åº
  
  // è¡¨å•é…ç½®
  layout?: "vertical" | "horizontal" | "inline";
  columns?: number;            // å‡ åˆ—å¸ƒå±€
  
  // å›¾è¡¨é…ç½®
  chartType?: "bar" | "line" | "pie" | "area";
  
  // é€šç”¨é…ç½®
  collapsible?: boolean;       // æ˜¯å¦å¯æŠ˜å 
  defaultCollapsed?: boolean;  // é»˜è®¤æŠ˜å 
}

// ==================== å­—æ®µå®šä¹‰ ====================

interface FieldSpec {
  id: string;
  name: string;                // å­—æ®µæ ‡ç­¾ï¼ˆæ˜¾ç¤ºåï¼‰
  fieldKey: string;            // å­—æ®µ keyï¼ˆä»£ç ç”¨ï¼‰
  type: FieldType;             // å­—æ®µç±»å‹
  required: boolean;           // æ˜¯å¦å¿…å¡«
  placeholder?: string;        // å ä½æç¤º
  defaultValue?: any;          // é»˜è®¤å€¼
  options?: OptionItem[];      // é€‰é¡¹ï¼ˆselect/radio/checkbox ç±»å‹ï¼‰
  optionSource?: string;       // é€‰é¡¹æ¥æºï¼ˆå¼•ç”¨æ•°æ®å­—å…¸ IDï¼‰
  validation?: ValidationRule[]; // æ ¡éªŒè§„åˆ™
  visible?: VisibilityRule;    // æ˜¾ç¤ºæ¡ä»¶
  editable?: EditableRule;     // å¯ç¼–è¾‘æ¡ä»¶
  helpText?: string;           // å¸®åŠ©æ–‡æœ¬
  width?: string;              // å®½åº¦ï¼ˆè¡¨æ ¼åˆ—å®½ï¼‰
}

type FieldType = 
  | "text"                     // å•è¡Œæ–‡æœ¬
  | "textarea"                 // å¤šè¡Œæ–‡æœ¬
  | "number"                   // æ•°å­—
  | "money"                    // é‡‘é¢
  | "percent"                  // ç™¾åˆ†æ¯”
  | "date"                     // æ—¥æœŸ
  | "datetime"                 // æ—¥æœŸæ—¶é—´
  | "daterange"                // æ—¥æœŸèŒƒå›´
  | "time"                     // æ—¶é—´
  | "select"                   // ä¸‹æ‹‰å•é€‰
  | "multiselect"              // ä¸‹æ‹‰å¤šé€‰
  | "radio"                    // å•é€‰æŒ‰é’®
  | "checkbox"                 // å¤é€‰æ¡†
  | "switch"                   // å¼€å…³
  | "upload"                   // æ–‡ä»¶ä¸Šä¼ 
  | "image"                    // å›¾ç‰‡ä¸Šä¼ 
  | "richtext"                 // å¯Œæ–‡æœ¬
  | "cascader"                 // çº§è”é€‰æ‹©
  | "treeselect"               // æ ‘å½¢é€‰æ‹©
  | "user"                     // ç”¨æˆ·é€‰æ‹©å™¨
  | "department"               // éƒ¨é—¨é€‰æ‹©å™¨
  | "address"                  // åœ°å€é€‰æ‹©
  | "phone"                    // æ‰‹æœºå·
  | "email"                    // é‚®ç®±
  | "idcard"                   // èº«ä»½è¯
  | "url"                      // ç½‘å€
  | "color"                    // é¢œè‰²é€‰æ‹©
  | "rate"                     // è¯„åˆ†
  | "slider"                   // æ»‘å—
  | "custom";                  // è‡ªå®šä¹‰

interface OptionItem {
  label: string;               // æ˜¾ç¤ºæ–‡æœ¬
  value: string;               // å€¼
  color?: string;              // æ ‡ç­¾é¢œè‰²
  disabled?: boolean;          // æ˜¯å¦ç¦ç”¨
}

interface ValidationRule {
  type: "required" | "length" | "pattern" | "range" | "custom";
  rule: string;                // è§„åˆ™æè¿°æˆ–æ­£åˆ™
  message: string;             // é”™è¯¯æç¤º
  min?: number;                // æœ€å°å€¼/é•¿åº¦
  max?: number;                // æœ€å¤§å€¼/é•¿åº¦
}

interface VisibilityRule {
  condition: string;           // æ¡ä»¶è¡¨è¾¾å¼ï¼Œå¦‚ "status === 'active'"
  description: string;         // æ¡ä»¶è¯´æ˜
}

interface EditableRule {
  condition: string;           // æ¡ä»¶è¡¨è¾¾å¼
  description: string;         // æ¡ä»¶è¯´æ˜
}

// ==================== è¡¨æ ¼åˆ—å®šä¹‰ ====================

interface ColumnSpec {
  id: string;
  name: string;                // åˆ—æ ‡é¢˜
  fieldKey: string;            // æ•°æ®å­—æ®µ
  type: ColumnType;            // åˆ—ç±»å‹
  width?: string;              // åˆ—å®½
  fixed?: "left" | "right";    // å›ºå®šåˆ—
  sortable?: boolean;          // å¯æ’åº
  filterable?: boolean;        // å¯ç­›é€‰
  align?: "left" | "center" | "right";
  render?: ColumnRender;       // ç‰¹æ®Šæ¸²æŸ“
}

type ColumnType = 
  | "text"                     // æ™®é€šæ–‡æœ¬
  | "number"                   // æ•°å­—
  | "money"                    // é‡‘é¢
  | "date"                     // æ—¥æœŸ
  | "datetime"                 // æ—¥æœŸæ—¶é—´
  | "tag"                      // æ ‡ç­¾
  | "status"                   // çŠ¶æ€
  | "avatar"                   // å¤´åƒ
  | "image"                    // å›¾ç‰‡
  | "link"                     // é“¾æ¥
  | "progress"                 // è¿›åº¦æ¡
  | "action";                  // æ“ä½œåˆ—

interface ColumnRender {
  type: "tag" | "status" | "link" | "progress" | "custom";
  config?: {
    colorMap?: Record<string, string>;  // çŠ¶æ€é¢œè‰²æ˜ å°„
    linkPattern?: string;               // é“¾æ¥æ¨¡å¼
  };
}

// ==================== æ“ä½œå®šä¹‰ ====================

interface ActionSpec {
  id: string;
  name: string;                // æŒ‰é’®æ–‡å­—
  type: "primary" | "default" | "danger" | "link" | "icon";
  icon?: string;               // å›¾æ ‡
  position: ActionPosition;    // ä½ç½®
  confirm?: ConfirmConfig;     // ç¡®è®¤é…ç½®
  behavior: ActionBehavior;    // è¡Œä¸º
  permission?: string;         // æƒé™æ ‡è¯†
  visible?: VisibilityRule;    // æ˜¾ç¤ºæ¡ä»¶
  disabled?: EditableRule;     // ç¦ç”¨æ¡ä»¶
}

type ActionPosition = 
  | "toolbar"                  // é¡µé¢/è¡¨æ ¼å·¥å…·æ 
  | "toolbar-left"             // å·¥å…·æ å·¦ä¾§
  | "toolbar-right"            // å·¥å…·æ å³ä¾§
  | "row"                      // è¡¨æ ¼è¡Œæ“ä½œ
  | "row-more"                 // è¡¨æ ¼è¡Œæ›´å¤šæ“ä½œ
  | "form-footer"              // è¡¨å•åº•éƒ¨
  | "card-header"              // å¡ç‰‡å¤´éƒ¨
  | "card-footer";             // å¡ç‰‡åº•éƒ¨

interface ConfirmConfig {
  title: string;               // ç¡®è®¤æ ‡é¢˜
  content: string;             // ç¡®è®¤å†…å®¹
  type: "info" | "warning" | "danger";
}

interface ActionBehavior {
  type: "navigate" | "modal" | "drawer" | "action" | "download" | "print";
  target?: string;             // ç›®æ ‡ï¼ˆè·¯ç”±/å¼¹çª—å†…å®¹IDï¼‰
  params?: Record<string, string>; // å‚æ•°
  description: string;         // è¡Œä¸ºæè¿°
  successMessage?: string;     // æˆåŠŸæç¤º
}

// ==================== ä¸šåŠ¡è§„åˆ™ ====================

interface RuleSpec {
  id: string;
  name: string;                // è§„åˆ™åç§°
  description: string;         // è§„åˆ™æè¿°
  trigger: RuleTrigger;        // è§¦å‘æ—¶æœº
  condition: string;           // æ¡ä»¶è¡¨è¾¾å¼
  action: RuleAction;          // æ‰§è¡ŒåŠ¨ä½œ
}

type RuleTrigger = 
  | "onLoad"                   // é¡µé¢åŠ è½½æ—¶
  | "onChange"                 // å­—æ®µå˜åŒ–æ—¶
  | "onSubmit"                 // æäº¤æ—¶
  | "onAction";                // æ“ä½œæ—¶

interface RuleAction {
  type: "validate" | "calculate" | "setField" | "setVisible" | "setEditable" | "message";
  config: Record<string, any>;
}

// ==================== è§’è‰²æƒé™ ====================

interface RoleSpec {
  id: string;
  name: string;
  description: string;
  permissions: PermissionItem[];
}

interface PermissionItem {
  module: string;              // æ¨¡å—ID
  actions: string[];           // å…è®¸çš„æ“ä½œï¼šview/create/edit/delete/export/...
  dataScope?: string;          // æ•°æ®èŒƒå›´ï¼šall/department/self
}

// ==================== æ•°æ®å­—å…¸ ====================

interface DictItem {
  id: string;                  // å­—å…¸IDï¼Œä¾›å­—æ®µå¼•ç”¨
  name: string;                // å­—å…¸åç§°
  category: string;            // å­—å…¸åˆ†ç±»
  items: {
    label: string;
    value: string;
    color?: string;            // æ ‡ç­¾/çŠ¶æ€é¢œè‰²
    icon?: string;             // å›¾æ ‡
    disabled?: boolean;
  }[];
}

// ==================== çŠ¶æ€æµè½¬ ====================

interface StatusFlow {
  id: string;
  entity: string;              // å®ä½“åç§°ï¼ˆå¦‚"è®¢å•"ã€"å®¡æ‰¹å•"ï¼‰
  description: string;         // æµç¨‹æè¿°
  statuses: {
    id: string;
    name: string;
    color: string;             // çŠ¶æ€é¢œè‰²
    description: string;
  }[];
  transitions: {
    from: string;              // èµ·å§‹çŠ¶æ€
    to: string;                // ç›®æ ‡çŠ¶æ€
    action: string;            // è§¦å‘åŠ¨ä½œ
    actor?: string;            // æ‰§è¡Œè§’è‰²
    condition?: string;        // å‰ç½®æ¡ä»¶
  }[];
}
```

---

## spec.md æ–‡æ¡£æ¨¡æ¿

```markdown
# {äº§å“åç§°} äº§å“éœ€æ±‚è¯´æ˜ä¹¦

> **ç‰ˆæœ¬**ï¼š{version} | **çŠ¶æ€**ï¼š{status} | **æ›´æ–°æ—¶é—´**ï¼š{updatedAt}
> 
> **æ¥æºéœ€æ±‚**ï¼šrequirements.json v{sourceVersion}

---

## æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ˜¯äº§å“éœ€æ±‚è¯´æ˜ä¹¦ï¼ˆSpecï¼‰ï¼Œç”¨äºï¼š
1. æŒ‡å¯¼ AI ç”Ÿæˆå‰ç«¯ Demo ä»£ç 
2. ä¾›äº¤ä»˜å›¢é˜Ÿç†è§£äº§å“éœ€æ±‚

**æ³¨æ„**ï¼šæœ¬æ–‡æ¡£åªæè¿°"åšä»€ä¹ˆ"ï¼Œä¸æ¶‰åŠæŠ€æœ¯å®ç°ç»†èŠ‚ã€‚

---

## ä¸€ã€äº§å“æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

{background}

### 1.2 äº§å“ç›®æ ‡

{goals - åˆ—è¡¨å½¢å¼}

### 1.3 ç›®æ ‡ç”¨æˆ·

| è§’è‰² | æè¿° | æ ¸å¿ƒè¯‰æ±‚ |
|------|------|----------|
| {role} | {description} | {needs} |

### 1.4 èŒƒå›´å®šä¹‰

**æœ¬æœŸåŒ…å«ï¼š**
{included - åˆ—è¡¨}

**æœ¬æœŸä¸å«ï¼š**
{excluded - åˆ—è¡¨}

---

## äºŒã€ä¿¡æ¯æ¶æ„

### 2.1 ç«™ç‚¹åœ°å›¾

```
{sitemap - æ ‘å½¢ç»“æ„}
```

### 2.2 å¯¼èˆªç»“æ„

| ä¸€çº§èœå• | äºŒçº§èœå• | è·¯ç”± | è¯´æ˜ |
|----------|----------|------|------|
| {level1} | {level2} | {route} | {description} |

---

## ä¸‰ã€åŠŸèƒ½æ¨¡å—

### 3.1 {æ¨¡å—åç§°}

> {æ¨¡å—æè¿°}

#### 3.1.1 {é¡µé¢åç§°}

**åŸºæœ¬ä¿¡æ¯**
- **è·¯ç”±**ï¼š`{route}`
- **å¸ƒå±€**ï¼š{layout}
- **æè¿°**ï¼š{description}

**é¡µé¢åŒºå—**

##### åŒºå—1ï¼š{åŒºå—åç§°}

**ç±»å‹**ï¼š{type}

**å­—æ®µåˆ—è¡¨**ï¼š

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | æ ¡éªŒè§„åˆ™ |
|------|------|------|------|----------|
| {name} | {type} | {required} | {description} | {validation} |

**æ“ä½œæŒ‰é’®**ï¼š

| æŒ‰é’® | ç±»å‹ | ä½ç½® | è¡Œä¸º |
|------|------|------|------|
| {name} | {type} | {position} | {behavior} |

**ä¸šåŠ¡è§„åˆ™**ï¼š
- {rule1}
- {rule2}

---

## å››ã€å…¨å±€è§„åˆ™

### 4.1 è§’è‰²æƒé™

| è§’è‰² | æè¿° | æ¨¡å—æƒé™ |
|------|------|----------|
| {role} | {description} | {permissions} |

### 4.2 æ•°æ®å­—å…¸

#### 4.2.1 {å­—å…¸åç§°}

| å€¼ | æ˜¾ç¤º | é¢œè‰² |
|----|------|------|
| {value} | {label} | {color} |

### 4.3 çŠ¶æ€æµè½¬

#### 4.3.1 {å®ä½“åç§°}çŠ¶æ€æµè½¬

```
{status-flow-diagram}
```

| å½“å‰çŠ¶æ€ | æ“ä½œ | ç›®æ ‡çŠ¶æ€ | æ¡ä»¶ |
|----------|------|----------|------|
| {from} | {action} | {to} | {condition} |

---

## é™„å½•

### A. å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´äºº |
|------|------|----------|--------|
| {version} | {date} | {changes} | {author} |

### B. æœ¯è¯­è¡¨

| æœ¯è¯­ | è¯´æ˜ |
|------|------|
| {term} | {definition} |
```

---

## .spec-mapping.yaml æ ¼å¼

```yaml
# Spec ä¸ä»£ç çš„æ˜ å°„å…³ç³»ï¼ˆç”¨äºå¢é‡æ›´æ–°ï¼‰
version: "1.0.0"
specHash: "a3f8c2d1"            # spec.json çš„ hash
generatedAt: "2026-01-27T10:30:00Z"

mappings:
  - moduleId: user-management
    moduleName: ç”¨æˆ·ç®¡ç†
    locked: false
    files:
      - path: src/app/users/page.tsx
        type: page
        pageId: user-list
        
      - path: src/app/users/[id]/page.tsx
        type: page
        pageId: user-detail
        
      - path: src/components/users/user-table.tsx
        type: component
        sectionId: user-list-table
        
      - path: src/components/users/user-form.tsx
        type: component
        sectionId: user-form
        locked: true
        lockedReason: "æ·»åŠ äº†è‡ªå®šä¹‰æ ¡éªŒé€»è¾‘"
        lockedAt: "2026-01-27T14:30:00Z"
        lockedBy: "å¼ ä¸‰"
        
      - path: src/mock/users.ts
        type: mock
        
  - moduleId: approval-flow
    moduleName: å®¡æ‰¹æµç¨‹
    locked: true
    lockedReason: "äº¤ä»˜å›¢é˜Ÿå·²è‡ªå®šä¹‰å®¡æ‰¹é€»è¾‘"
    lockedAt: "2026-01-25T10:00:00Z"
    lockedBy: "æå››"
    files:
      - path: src/app/approval/page.tsx
        type: page
```

---

## å·¥ä½œæµç¨‹

### Step 1: è¯»å–å¹¶ç†è§£éœ€æ±‚ï¼ˆä¸æ˜¯æŠ„ï¼‰

```
1. è¯»å– docs/customer/requirements.json
2. æç‚¼æ ¸å¿ƒé—®é¢˜ï¼šå®¢æˆ·åˆ°åº•è¦è§£å†³ä»€ä¹ˆç—›ç‚¹ï¼Ÿ
3. è¯†åˆ« P0 éœ€æ±‚ï¼šå“ªäº›æ˜¯"æ²¡æœ‰å°±ä¸èƒ½ç”¨"çš„ï¼Ÿ
4. ç†è§£çº¦æŸï¼šé¢„ç®—ã€æ—¶é—´ã€æŠ€æœ¯é™åˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ
```

**å…³é”®åŠ¨ä½œ**ï¼šå†™ä¸‹"å®¢æˆ·æœ€æ ¸å¿ƒçš„ 3 ä¸ªç—›ç‚¹"ï¼Œåç»­æ‰€æœ‰è®¾è®¡éƒ½è¦å›´ç»•å®ƒã€‚

### Step 2: åšå‡æ³•ï¼Œä¸æ˜¯åŠ æ³•

åœ¨è®¾è®¡ä¹‹å‰ï¼Œå…ˆæ€è€ƒï¼š

| é—®é¢˜ | å¿…é¡»å›ç­” |
|------|----------|
| å“ªäº›åŠŸèƒ½**å¿…é¡»æœ‰**ï¼Ÿ | P0 éœ€æ±‚ï¼Œä¸åšå°±æ²¡æ³•ç”¨ |
| å“ªäº›åŠŸèƒ½**å¯ä»¥æ²¡æœ‰**ï¼Ÿ | P1/P2 éœ€æ±‚ï¼Œæ™šç‚¹åšä¹Ÿè¡Œ |
| å“ªäº›åŠŸèƒ½**æ ¹æœ¬ä¸éœ€è¦**ï¼Ÿ | å®¢æˆ·æ²¡æè¿‡ï¼Œæˆ‘ä»¬ä¹Ÿåˆ«åŠ  |

**åŸåˆ™**ï¼šå®å¯åš 3 ä¸ªåŠŸèƒ½åšåˆ° 90 åˆ†ï¼Œä¹Ÿä¸è¦åš 10 ä¸ªåŠŸèƒ½æ¯ä¸ª 60 åˆ†ã€‚

### Step 3: è®¾è®¡æ ¸å¿ƒæ¨¡å—ï¼ˆå¸¦ç†ç”±ï¼‰

å¯¹æ¯ä¸ªæ¨¡å—ï¼Œå¿…é¡»è¯´æ˜**ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªæ¨¡å—**ï¼š

```markdown
### æ ·å“ç®¡ç†æ¨¡å—

**ä¸ºä»€ä¹ˆéœ€è¦**ï¼š
å®¢æˆ·ç—›ç‚¹æ˜¯"æ ·å“å¤ªå¤šæ‰¾ä¸åˆ°"ï¼Œéœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„åœ°æ–¹ç®¡ç†æ ·å“ã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- æ ·å“åˆ—è¡¨ï¼šæŒ‰ç¼–å·/çŠ¶æ€å¿«é€Ÿç­›é€‰ï¼ˆè§£å†³"æ‰¾ä¸åˆ°"çš„é—®é¢˜ï¼‰
- æ ·å“è¯¦æƒ…ï¼šæŸ¥çœ‹å®Œæ•´ä¿¡æ¯ï¼ˆå‡å°‘çº¸è´¨æ¡£æ¡ˆæŸ¥è¯¢ï¼‰

**ä¸åš**ï¼š
- æ ·å“æ‰¹é‡å¯¼å…¥ï¼šå®¢æˆ·æ¯å¤©åªæœ‰ 5-10 ä¸ªæ ·å“ï¼Œæ‰‹åŠ¨å½•å…¥å¯æ¥å—
- æ ·å“æ¡ç æ‰“å°ï¼šå®¢æˆ·å·²æœ‰æ¡ç æ‰“å°æœºå’Œè½¯ä»¶ï¼Œä¸éœ€è¦é‡å¤å»ºè®¾
```

### Step 4: ç²¾ç®€å­—æ®µï¼ˆåªç•™å¿…è¦çš„ï¼‰

**é”™è¯¯åšæ³•**ï¼šæŠŠèƒ½æƒ³åˆ°çš„å­—æ®µéƒ½åˆ—ä¸Š

**æ­£ç¡®åšæ³•**ï¼šæ¯ä¸ªå­—æ®µéƒ½é—®"åˆ äº†ä¼šæ€æ ·"

| å­—æ®µ | å¿…è¦æ€§ | ç†ç”± |
|------|--------|------|
| æ ·å“ç¼–å· | âœ… å¿…é¡» | å”¯ä¸€æ ‡è¯†ï¼ŒæŸ¥è¯¢ä¾æ® |
| æ ·å“åç§° | âœ… å¿…é¡» | ä¸šåŠ¡è¾¨è¯† |
| å¤‡æ³¨ | âš ï¸ å¯é€‰ | å®¢æˆ·è¯´"æœ‰æ—¶å€™è¦å¤‡æ³¨" |
| åˆ›å»ºäºº | âŒ åˆ é™¤ | ç³»ç»Ÿè‡ªåŠ¨è®°å½•ï¼Œä¸éœ€è¦å±•ç¤º |
| ä¿®æ”¹æ—¶é—´ | âŒ åˆ é™¤ | å®¢æˆ·è¯´"ä¸å…³å¿ƒä¿®æ”¹è®°å½•" |

### Step 5: è´¨é‡è‡ªæ£€

ç”Ÿæˆå‰å¼ºåˆ¶æ£€æŸ¥ï¼š

```markdown
## è‡ªæ£€æ¸…å•

### è´´åˆåº¦ï¼ˆ0-10 åˆ†ï¼‰ï¼š___
- [ ] æ¯ä¸ªæ¨¡å—éƒ½èƒ½å¯¹åº”åˆ° requirements ä¸­çš„éœ€æ±‚
- [ ] æ²¡æœ‰"æˆ‘è§‰å¾—åº”è¯¥æœ‰"çš„åŠŸèƒ½

### æ·±åº¦ï¼ˆ0-10 åˆ†ï¼‰ï¼š___  
- [ ] æ¯ä¸ªæ¨¡å—éƒ½è¯´æ˜äº†"ä¸ºä»€ä¹ˆéœ€è¦"
- [ ] å…³é”®å­—æ®µéƒ½è¯´æ˜äº†"ä¸ºä»€ä¹ˆå¿…å¡«"

### ç²¾ç‚¼åº¦ï¼ˆ0-10 åˆ†ï¼‰ï¼š___
- [ ] å­—æ®µæ•°é‡ < éœ€æ±‚ä¸­æåˆ°çš„ä¸šåŠ¡å­—æ®µ Ã— 1.2
- [ ] æ²¡æœ‰"ä¸ºäº†å…¨é¢è€Œå…¨é¢"çš„å†…å®¹

### å–èˆï¼ˆ0-10 åˆ†ï¼‰ï¼š___
- [ ] æ˜ç¡®åˆ—å‡ºäº†"ä¸åšä»€ä¹ˆ"
- [ ] ä¸åšçš„ç†ç”±æ˜¯åŸºäºå®¢æˆ·éœ€æ±‚ï¼Œä¸æ˜¯æˆ‘ä»¬çš„åˆ¤æ–­

**æ€»åˆ†ï¼š___ / 40**ï¼ˆ< 32 åˆ†è¯·é‡æ–°æ€è€ƒï¼‰
```

### Step 6: ç”Ÿæˆè¾“å‡ºæ–‡ä»¶

1. **ç”Ÿæˆ spec.json**ï¼š
   - ç»“æ„åŒ–æ•°æ®
   - UTF-8 ç¼–ç 
   - 2 ç©ºæ ¼ç¼©è¿›

2. **ç”Ÿæˆ spec.md**ï¼š
   - å¯è¯»æ–‡æ¡£
   - æŒ‰æ¨¡æ¿æ ¼å¼ç”Ÿæˆ

3. **ç”Ÿæˆ .spec-mapping.yaml**ï¼š
   - åˆå§‹åŒ–æ˜ å°„å…³ç³»
   - æ‰€æœ‰æ¨¡å— `locked: false`

### Step 7: è¾“å‡ºæ‘˜è¦

```markdown
## Spec ç”Ÿæˆå®Œæˆ

**äº§å“åç§°**ï¼š{name}
**ç‰ˆæœ¬**ï¼š{version}
**çŠ¶æ€**ï¼š{status}

### æ¨¡å—æ¦‚è§ˆ

| æ¨¡å— | é¡µé¢æ•° | å­—æ®µæ•° | æ“ä½œæ•° |
|------|--------|--------|--------|
| {module} | {pages} | {fields} | {actions} |

### ç”Ÿæˆæ–‡ä»¶

- `docs/spec/spec.json` - ç»“æ„åŒ–æ•°æ®ï¼ˆAI æ¶ˆè´¹ï¼‰
- `docs/spec/spec.md` - å¯è¯»æ–‡æ¡£ï¼ˆäººå·¥é˜…è¯»ï¼‰
- `docs/spec/.spec-mapping.yaml` - æ˜ å°„æ–‡ä»¶ï¼ˆå¢é‡æ›´æ–°ï¼‰

### ä¸‹ä¸€æ­¥

è¿è¡Œ `/init-app` åŸºäº Spec ç”Ÿæˆ Demo ä»£ç ã€‚
```

---

## å¢é‡æ›´æ–°æœºåˆ¶

### è§¦å‘æ¡ä»¶

å½“ç”¨æˆ·è¯´"æ›´æ–° spec"æˆ– requirements æœ‰å˜æ›´æ—¶ã€‚

### æ›´æ–°æµç¨‹

1. **è¯»å–å½“å‰ Spec å’Œ Mapping**
2. **å¯¹æ¯” Requirements å˜æ›´**ï¼š
   - è¯†åˆ«æ–°å¢/ä¿®æ”¹/åˆ é™¤çš„éœ€æ±‚
   - æ˜ å°„åˆ°æ¨¡å—/é¡µé¢
3. **æ£€æŸ¥é”å®šçŠ¶æ€**ï¼š
   - å·²é”å®šçš„æ¨¡å—/é¡µé¢è·³è¿‡
   - æœªé”å®šçš„æ­£å¸¸æ›´æ–°
4. **ç”Ÿæˆå˜æ›´æŠ¥å‘Š**
5. **æ›´æ–°æ–‡ä»¶**

### é”å®šæœºåˆ¶

**é”å®šçº§åˆ«**ï¼š

| çº§åˆ« | è¯´æ˜ | æ•ˆæœ |
|------|------|------|
| æ¨¡å—é”å®š | æ•´ä¸ªæ¨¡å—é”å®š | æ¨¡å—ä¸‹æ‰€æœ‰é¡µé¢è·³è¿‡ |
| é¡µé¢é”å®š | å•ä¸ªé¡µé¢é”å®š | åªè·³è¿‡è¯¥é¡µé¢ |
| æ–‡ä»¶é”å®š | å•ä¸ªä»£ç æ–‡ä»¶é”å®š | åªè·³è¿‡è¯¥æ–‡ä»¶ |

**é”å®šæ“ä½œ**ï¼š

åœ¨ spec.json ä¸­è®¾ç½®ï¼š
```json
{
  "modules": [{
    "id": "approval-flow",
    "locked": true,
    "lockedReason": "äº¤ä»˜å›¢é˜Ÿå·²è‡ªå®šä¹‰"
  }]
}
```

æˆ–åœ¨ .spec-mapping.yaml ä¸­è®¾ç½®æ–‡ä»¶çº§é”å®šã€‚

### å˜æ›´æŠ¥å‘Šæ ¼å¼

```markdown
## Spec æ›´æ–°æŠ¥å‘Š

**æ›´æ–°æ—¶é—´**ï¼š{datetime}
**ç‰ˆæœ¬**ï¼š{oldVersion} â†’ {newVersion}

### å˜æ›´æ‘˜è¦

| ç±»å‹ | æ•°é‡ |
|------|------|
| æ–°å¢æ¨¡å— | {count} |
| ä¿®æ”¹æ¨¡å— | {count} |
| è·³è¿‡ï¼ˆé”å®šï¼‰ | {count} |

### è¯¦ç»†å˜æ›´

#### æ–°å¢
- {module}: {description}

#### ä¿®æ”¹
- {module}: {changes}

#### è·³è¿‡ï¼ˆå·²é”å®šï¼‰
- {module}: {reason}

### æ³¨æ„äº‹é¡¹
- {notes}
```

---

## è®¾è®¡åŸåˆ™

### 1. è§£å†³é—®é¢˜ï¼Œä¸æ˜¯å¡«æ¨¡æ¿

**é”™è¯¯**ï¼šçœ‹åˆ°"ç”¨æˆ·ç®¡ç†"å°±å†™ä¸Šå¢åˆ æ”¹æŸ¥
**æ­£ç¡®**ï¼šå®¢æˆ·è¯´"è¦èƒ½å†»ç»“ç¦»èŒå‘˜å·¥"ï¼Œé‚£å°±åªåšå†»ç»“åŠŸèƒ½

### 2. æ¯ä¸ªè®¾è®¡éƒ½è¦æœ‰ç†ç”±

**é”™è¯¯**ï¼š
```
- ç”¨æˆ·åï¼štextï¼Œå¿…å¡«
- æ‰‹æœºå·ï¼šphoneï¼Œå¿…å¡«
- é‚®ç®±ï¼šemailï¼Œé€‰å¡«
```

**æ­£ç¡®**ï¼š
```
- ç”¨æˆ·åï¼štextï¼Œå¿…å¡«ï¼ˆå®¢æˆ·è¦æ±‚ç”¨çœŸåï¼Œæ–¹ä¾¿è¯†åˆ«ï¼‰
- æ‰‹æœºå·ï¼šphoneï¼Œå¿…å¡«ï¼ˆç”¨äºç™»å½•éªŒè¯ï¼Œå®¢æˆ·æ˜ç¡®è¦æ±‚ï¼‰
- é‚®ç®±ï¼šä¸éœ€è¦ï¼ˆå®¢æˆ·è¯´"æˆ‘ä»¬å†…éƒ¨ä¸ç”¨é‚®ä»¶"ï¼‰
```

### 3. æ•¢äºè¯´"ä¸åš"

æ¯ä¸ªæ¨¡å—éƒ½è¦æœ‰"ä¸åšæ¸…å•"ï¼Œå¹¶è¯´æ˜åŸå› ï¼š

```markdown
**ç”¨æˆ·ç®¡ç† - ä¸åšæ¸…å•**ï¼š
- ç”¨æˆ·å¯¼å…¥/å¯¼å‡ºï¼šå®¢æˆ·äººæ•°å°‘äº 50ï¼Œæ‰‹åŠ¨ç»´æŠ¤å³å¯
- æ“ä½œæ—¥å¿—ï¼šå®¢æˆ·æ˜ç¡®è¯´åˆæœŸä¸éœ€è¦
- ç»„ç»‡æ¶æ„æ ‘ï¼šå®¢æˆ·åªæœ‰ 2 çº§éƒ¨é—¨ï¼Œä¸‹æ‹‰æ¡†è¶³å¤Ÿ
```

### 4. è´¨é‡ > æ•°é‡

| æƒ…å†µ | é€‰æ‹© |
|------|------|
| 20 ä¸ªå­—æ®µ vs 10 ä¸ªå­—æ®µ | é€‰ 10 ä¸ªï¼Œå¦‚æœèƒ½æ»¡è¶³éœ€æ±‚ |
| 5 ä¸ªé¡µé¢ vs 3 ä¸ªé¡µé¢ | é€‰ 3 ä¸ªï¼Œå¦‚æœèƒ½è§£å†³é—®é¢˜ |
| è¯¦ç»†æè¿° vs ç®€æ´æè¿° | é€‰ç®€æ´ï¼Œå¦‚æœä¸å½±å“ç†è§£ |

### 5. è¿½é—®"çœŸçš„éœ€è¦å—ï¼Ÿ"

å¯¹æ¯ä¸ªåŠŸèƒ½ã€æ¯ä¸ªå­—æ®µã€æ¯ä¸ªæŒ‰é’®éƒ½è¿½é—®ï¼š

- å®¢æˆ·æ˜ç¡®æè¿‡å—ï¼Ÿâ†’ æ²¡æœ‰å°±ä¸åš
- åˆ æ‰ä¼šå½±å“æ ¸å¿ƒæµç¨‹å—ï¼Ÿâ†’ ä¸å½±å“å°±åˆ 
- æ˜¯"å¿…é¡»æœ‰"è¿˜æ˜¯"æœ€å¥½æœ‰"ï¼Ÿâ†’ "æœ€å¥½æœ‰"çš„å…ˆä¸åš

---

## è¾“å‡ºç¤ºä¾‹

è¯¦ç»†ç¤ºä¾‹è¯·å‚è€ƒå®é™…ç”Ÿæˆçš„ `docs/spec/spec.json` æ–‡ä»¶ã€‚

ä»¥ä¸‹æ˜¯ç®€åŒ–ç¤ºä¾‹ï¼š

```json
{
  "meta": {
    "version": "1.0.0",
    "name": "LIMS å®éªŒå®¤ç®¡ç†ç³»ç»Ÿ",
    "description": "æ£€æµ‹å®éªŒå®¤ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ",
    "createdAt": "2026-01-27T10:00:00Z",
    "updatedAt": "2026-01-27T10:00:00Z",
    "status": "draft",
    "sourceRequirements": "1.0.0"
  },
  "overview": {
    "background": "åæµ‹æ£€æµ‹æ˜¯ç¬¬ä¸‰æ–¹æ£€æµ‹æœºæ„ï¼Œå¹´æ£€æµ‹æ ·å“é‡è¶…è¿‡10ä¸‡ä»¶ï¼Œéœ€è¦ç»Ÿä¸€çš„ä¿¡æ¯åŒ–ç³»ç»Ÿæ”¯æ’‘ä¸šåŠ¡å‘å±•",
    "goals": [
      "æŠ¥å‘Šåˆ¶ä½œæ•ˆç‡æå‡80%",
      "å®ç°å¤šåˆ†æ”¯æ•°æ®å®æ—¶åŒæ­¥",
      "æ»¡è¶³CNASè®¤å¯è¦æ±‚"
    ],
    "targetUsers": [
      {
        "role": "æ£€æµ‹å‘˜",
        "description": "æ‰§è¡Œæ£€æµ‹ä»»åŠ¡çš„ä¸€çº¿äººå‘˜",
        "needs": ["å¿«é€Ÿå½•å…¥", "æ‰¹é‡æ“ä½œ", "è¿›åº¦æŸ¥è¯¢"]
      },
      {
        "role": "æŠ¥å‘Šç¼–åˆ¶å‘˜",
        "description": "è´Ÿè´£ç¼–åˆ¶æ£€æµ‹æŠ¥å‘Š",
        "needs": ["è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š", "æ¨¡æ¿ç®¡ç†", "æ‰¹é‡æ‰“å°"]
      }
    ],
    "scope": {
      "included": ["æ ·å“ç®¡ç†", "æ£€æµ‹ç®¡ç†", "æŠ¥å‘Šç®¡ç†", "åŸºç¡€æŠ¥è¡¨"],
      "excluded": ["è´¢åŠ¡ç®¡ç†", "å®¢æˆ·é—¨æˆ·", "ç§»åŠ¨ç«¯"]
    }
  },
  "architecture": {
    "sitemap": [
      {
        "id": "sample",
        "name": "æ ·å“ç®¡ç†",
        "route": "/samples",
        "icon": "flask",
        "children": [
          {"id": "sample-list", "name": "æ ·å“åˆ—è¡¨", "route": "/samples"},
          {"id": "sample-receive", "name": "æ ·å“æ¥æ”¶", "route": "/samples/receive"}
        ]
      },
      {
        "id": "report",
        "name": "æŠ¥å‘Šç®¡ç†",
        "route": "/reports",
        "icon": "file-text",
        "children": [
          {"id": "report-list", "name": "æŠ¥å‘Šåˆ—è¡¨", "route": "/reports"},
          {"id": "report-template", "name": "æ¨¡æ¿ç®¡ç†", "route": "/reports/templates"}
        ]
      }
    ]
  },
  "modules": [
    {
      "id": "sample-management",
      "name": "æ ·å“ç®¡ç†",
      "description": "æ ·å“å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬æ¥æ”¶ã€ç™»è®°ã€åˆ†é…ã€æµè½¬ç­‰",
      "locked": false,
      "pages": [
        {
          "id": "sample-list",
          "name": "æ ·å“åˆ—è¡¨",
          "route": "/samples",
          "description": "æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰æ ·å“",
          "locked": false,
          "layout": "list",
          "sections": [
            {
              "id": "sample-filter",
              "name": "ç­›é€‰æ¡ä»¶",
              "type": "form",
              "description": "æ ·å“ç­›é€‰",
              "fields": [
                {
                  "id": "f1",
                  "name": "æ ·å“ç¼–å·",
                  "fieldKey": "sampleNo",
                  "type": "text",
                  "required": false,
                  "placeholder": "è¯·è¾“å…¥æ ·å“ç¼–å·"
                },
                {
                  "id": "f2",
                  "name": "çŠ¶æ€",
                  "fieldKey": "status",
                  "type": "select",
                  "required": false,
                  "optionSource": "dict-sample-status"
                }
              ],
              "config": {
                "layout": "inline",
                "columns": 4
              }
            },
            {
              "id": "sample-table",
              "name": "æ ·å“è¡¨æ ¼",
              "type": "table",
              "description": "æ ·å“æ•°æ®åˆ—è¡¨",
              "columns": [
                {"id": "c1", "name": "æ ·å“ç¼–å·", "fieldKey": "sampleNo", "type": "link", "width": "150px"},
                {"id": "c2", "name": "æ ·å“åç§°", "fieldKey": "sampleName", "type": "text"},
                {"id": "c3", "name": "å§”æ‰˜å•ä½", "fieldKey": "client", "type": "text"},
                {"id": "c4", "name": "çŠ¶æ€", "fieldKey": "status", "type": "status"},
                {"id": "c5", "name": "æ¥æ”¶æ—¶é—´", "fieldKey": "receiveTime", "type": "datetime"},
                {"id": "c6", "name": "æ“ä½œ", "fieldKey": "action", "type": "action", "width": "150px", "fixed": "right"}
              ],
              "actions": [
                {
                  "id": "a1",
                  "name": "æ–°å¢æ ·å“",
                  "type": "primary",
                  "position": "toolbar-left",
                  "behavior": {"type": "navigate", "target": "/samples/create", "description": "è·³è½¬åˆ°æ ·å“æ–°å¢é¡µ"}
                },
                {
                  "id": "a2",
                  "name": "æŸ¥çœ‹",
                  "type": "link",
                  "position": "row",
                  "behavior": {"type": "navigate", "target": "/samples/{id}", "description": "æŸ¥çœ‹æ ·å“è¯¦æƒ…"}
                },
                {
                  "id": "a3",
                  "name": "åˆ é™¤",
                  "type": "link",
                  "position": "row",
                  "confirm": {"title": "ç¡®è®¤åˆ é™¤", "content": "ç¡®å®šè¦åˆ é™¤è¯¥æ ·å“å—ï¼Ÿ", "type": "danger"},
                  "behavior": {"type": "action", "description": "åˆ é™¤æ ·å“", "successMessage": "åˆ é™¤æˆåŠŸ"}
                }
              ],
              "config": {
                "pagination": true,
                "pageSize": 20,
                "selectable": true
              }
            }
          ]
        }
      ]
    }
  ],
  "globalRules": {
    "roles": [
      {
        "id": "admin",
        "name": "ç®¡ç†å‘˜",
        "description": "ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰å…¨éƒ¨æƒé™",
        "permissions": [
          {"module": "*", "actions": ["*"], "dataScope": "all"}
        ]
      },
      {
        "id": "tester",
        "name": "æ£€æµ‹å‘˜",
        "description": "æ‰§è¡Œæ£€æµ‹ä»»åŠ¡",
        "permissions": [
          {"module": "sample-management", "actions": ["view", "edit"], "dataScope": "self"}
        ]
      }
    ],
    "dictionary": [
      {
        "id": "dict-sample-status",
        "name": "æ ·å“çŠ¶æ€",
        "category": "sample",
        "items": [
          {"label": "å¾…æ£€", "value": "pending", "color": "gray"},
          {"label": "æ£€æµ‹ä¸­", "value": "testing", "color": "blue"},
          {"label": "å·²å®Œæˆ", "value": "completed", "color": "green"},
          {"label": "å¼‚å¸¸", "value": "abnormal", "color": "red"}
        ]
      }
    ],
    "statusFlows": [
      {
        "id": "sample-flow",
        "entity": "æ ·å“",
        "description": "æ ·å“çŠ¶æ€æµè½¬",
        "statuses": [
          {"id": "pending", "name": "å¾…æ£€", "color": "gray", "description": "ç­‰å¾…æ£€æµ‹"},
          {"id": "testing", "name": "æ£€æµ‹ä¸­", "color": "blue", "description": "æ­£åœ¨æ£€æµ‹"},
          {"id": "completed", "name": "å·²å®Œæˆ", "color": "green", "description": "æ£€æµ‹å®Œæˆ"}
        ],
        "transitions": [
          {"from": "pending", "to": "testing", "action": "å¼€å§‹æ£€æµ‹", "actor": "æ£€æµ‹å‘˜"},
          {"from": "testing", "to": "completed", "action": "æäº¤ç»“æœ", "actor": "æ£€æµ‹å‘˜"}
        ]
      }
    ]
  }
}
```

---

## é”™è¯¯å¤„ç†

| åœºæ™¯ | å¤„ç† |
|------|------|
| requirements.json ä¸å­˜åœ¨ | æç¤ºå…ˆè¿è¡Œ `/requirements` |
| requirements çŠ¶æ€ä¸ºè‰ç¨¿ | æç¤ºå…ˆå®Œå–„éœ€æ±‚ï¼ˆå›ç­”é—®é¢˜ï¼‰ |
| pendingQuestions å®Œæˆåº¦ < 50% | è­¦å‘Šå¹¶è¯¢é—®æ˜¯å¦ç»§ç»­ |
| æ¨¡å—å·²é”å®šä½†éœ€æ±‚æœ‰å˜æ›´ | è·³è¿‡å¹¶åœ¨æŠ¥å‘Šä¸­è¯´æ˜ |

---

## ä¸å…¶ä»– Skill çš„å…³ç³»

| Skill | å…³ç³» |
|-------|------|
| `/requirements` | ä¸Šæ¸¸ï¼Œæä¾›éœ€æ±‚æ•°æ® |
| `/init-app` | ä¸‹æ¸¸ï¼Œæ¶ˆè´¹ Spec ç”Ÿæˆä»£ç  |
| `/plan-writer` | å¹¶è¡Œï¼Œè§£å†³æ–¹æ¡ˆæ–‡æ¡£ |
